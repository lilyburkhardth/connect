"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[680],{99899:function(e,t,n){n.d(t,{N:function(){return p}});var i=n(85893),a=n(95749),r=n(99489),s=n(9669),c=n.n(s),l=n(27484),o=n.n(l),u=n(67294),d=n(35005),m=n(89583),h=n(72132),f=n(18269),x=n(8002),j=n(88258);function p(e){var t=e.token,n=e.distribution,s=(0,a.useUser)().account,l=(0,a.useGasPrice)(),o=l.gasPrice,d=l.level,m=(0,u.useState)([]),x=m[0],p=m[1];(0,u.useEffect)((function(){c().get("/api/merkle-claims?account=".concat(s,"&claimer=").concat(n.claimerAddress)).then((function(e){var t=e.data;p(t.claims||[])}))}),[s]);var g=(0,r.useMerkleClaimer)(n.claimerAddress,s,x),y=g.isClaimed,T=g.isPaused,C=g.claim,A=g.claims,N=g.isClaiming,O=n.symbol||t.symbol;return A.length?(0,i.jsxs)("div",{className:"space-y-3",children:[T&&(0,i.jsx)("p",{children:"The distribution is paused until further notice. For questions please head to the project Telegram group."}),(0,i.jsxs)("table",{className:"table table-striped table-sm",children:[(0,i.jsxs)("caption",{className:"text-white opacity-50 text-sm",children:["Gas price: ",o," Gwei [",d,"]"]}),(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"w-40",children:"Date"}),(0,i.jsx)("th",{className:"w-12",children:"%"}),(0,i.jsx)("th",{children:"Amount"}),(0,i.jsx)("th",{className:"text-center"})]})}),(0,i.jsx)("tbody",{children:(A||[]).map((function(e,t){return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)(v,{time:e.time,isClaimed:y[e.index],paused:T})}),(0,i.jsxs)("td",{children:[Object.values(n.schedule)[t],"%"]}),(0,i.jsxs)("td",{children:[(0,j.dv)((0,f.toBN)(e.amount))," ",O]}),(0,i.jsx)("td",{className:"text-center",children:(0,i.jsx)(b,{claim:e,tokenSymbol:O,account:s,paused:T,isClaimed:y[e.index],isClaiming:N,claimTokens:function(t){return C(t).then((function(){h.Am.success("Claimed ".concat((0,j.dv)((0,f.toBN)(e.amount))," ").concat(O),{position:h.Am.POSITION.BOTTOM_RIGHT})})).catch((function(e){h.Am.error("Failed to claim: ".concat((null===e||void 0===e?void 0:e.message)||e.toString()),{position:h.Am.POSITION.BOTTOM_RIGHT})}))}})})]},e.index)}))})]})]}):(0,i.jsx)("div",{children:"Nothing to claim"})}function v(e){var t=e.time,n=e.isClaimed,a=e.paused;return!t||a&&!n?(0,i.jsx)(i.Fragment,{children:"TBC"}):(0,i.jsx)(i.Fragment,{children:o().unix(t).utc().format(x.U5.noYear)})}function b(e){var t=e.claim,n=e.isClaimed,a=e.tokenSymbol,r=e.account,s=e.paused,c=e.isClaiming,l=e.claimTokens;return n?(0,i.jsxs)("div",{children:[(0,j.dv)((0,f.toBN)(t.amount))," ",a," ",(0,i.jsx)(m.FaCheck,{className:"inline text-green-600 ml-1"})]}):r?s?(0,i.jsx)(d.Z,{variant:"outline-light",size:"sm",disabled:!0,children:"Paused"}):t.time<Date.now()/1e3?(0,i.jsxs)(d.Z,{variant:"outline-primary",size:"sm",onClick:function(){return l(t.index)},disabled:c===t.index,children:[(c===t.index||-1===c)&&(0,i.jsx)(m.FaCircleNotch,{className:"inline fa-spin mr-2"}),"Claim"]}):(0,i.jsx)(d.Z,{variant:"outline-light",size:"sm",disabled:!0,children:"Not claimable"}):(0,i.jsx)(d.Z,{variant:"outline-light",size:"sm",disabled:!0,children:"Connect wallet first"})}},42557:function(e,t,n){n.d(t,{$:function(){return y}});var i=n(85893),a=n(95749),r=n(79007),s=n(27484),c=n.n(s),l=n(67294),o=n(35005),u=n(89583),d=n(51655),m=n(72132),h=n(18269),f=n(8002),x=n(52673),j=n(88258);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){p(e,t,n[t])}))}return e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,r=void 0;try{for(var s,c=e[Symbol.iterator]();!(i=(s=c.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(l){a=!0,r=l}finally{try{i||null==c.return||c.return()}finally{if(a)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function g(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function y(e){var t=e.token,n=e.distribution,s=function(){return(0,j.RE)(w,"getClaims",[A||"0x0000000000000000000000000000000000000000"]).then((function(e){var n=e[0].map((function(n,i){var a=(0,j.Rh)((0,h.toBN)(e[2][i]),t.decimals);return{idx:i,time:parseInt(n),percent:parseInt(e[1][i])/1e3,amount:a,isClaimable:Boolean(e[3][i])&&a.gt(f.Aj),claimedAmount:(0,j.Rh)((0,h.toBN)(e[4][i]),t.decimals)}}));B(n)})).catch((function(e){console.error("Failed to fetch claims",e)}))},c=function(e){A&&(W(e),w.methods.claim(A,e).send(v({value:0,from:A},"POLY"===p.symbol?{gasPrice:"420000000000"}:{})).then((function(){s(),m.Am.success("Claimed ".concat((0,j.dv)(P[e].amount)," ").concat(S),{position:m.Am.POSITION.BOTTOM_RIGHT})})).catch((function(e){m.Am.error("Failed to claim: ".concat((null===e||void 0===e?void 0:e.message)||e.toString()),{position:m.Am.POSITION.BOTTOM_RIGHT})})).finally((function(){return W(void 0)})))},u=(0,a.useWeb3Provider)(),p=u.targetChain,y=u.targetChainWeb3,A=(0,a.useUser)().account,N=n.claimerAddress,O=n.claimerVersion,S=n.symbol||t.symbol,k=O||"v2",w=(0,x.dn)(N,k),I=(0,l.useState)([]),P=I[0],B=I[1],F=(0,l.useState)(f.Aj),E=F[0],R=F[1],Z=(0,l.useState)(f.Aj),_=Z[0],z=Z[1],G=(0,l.useState)(!1),M=G[0],H=G[1],D=(0,l.useState)(!1),U=D[0],Y=D[1],q=(0,l.useState)(),L=q[0],W=q[1];(0,l.useEffect)((function(){if(y){var e=function(e){return(0,j.Rh)((0,h.toBN)(e),t.decimals)},n={totalTokens:e,isPaused:function(e){return!!e}};"v1"===k?n.claimedTokens=e:"v2"===k&&(n.getTotalClaimed=e),(0,j.lZ)({web3:y,methods:n,address:N,abi:r.CONTRACTS.claimer[k].abi,returnCachedOnError:!0}).then((function(e){var t=b(e,3),n=t[0],i=t[1],a=t[2];z(n),Y(i),R(a)}))}}),[k,N,y,A,t.decimals]),(0,l.useEffect)((function(){var e;if(P.length){var t=Date.now()/1e3,n=P.map((function(e){return e.time})).filter((function(e){return e>t})),i=(e=Math).min.apply(e,g(n));if(n.length>0){var a=setTimeout(s,1e3*(i-t));return function(){return clearTimeout(a)}}}}),[P.length]),(0,l.useEffect)((function(){w&&s().finally((function(){return H(!0)}))}),[w,A]);var V=P.reduce((function(e,t){return e.add(t.amount)}),f.Aj),$=P.reduce((function(e,t){return e.add(t.claimedAmount)}),f.Aj),J=P.filter((function(e){return e.isClaimable&&e.claimedAmount.eqn(0)}));return(0,i.jsxs)("div",{className:"space-y-3",children:[U&&(0,i.jsx)("p",{children:"The distribution is paused until further notice. For questions please head to the project Telegram group."}),(0,i.jsxs)("table",{className:"table table-striped table-sm",children:[(0,i.jsx)("caption",{className:"text-white opacity-50 text-sm",children:(0,i.jsxs)("span",{"data-tip":"Total claimer stats: ".concat((0,j.dv)(E)," ").concat(S," / ").concat((0,j.dv)(_)," ").concat(S),children:["Total: ",(0,j.dv)($)," ",S," / ",(0,j.dv)(V)," ",S]})}),(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"w-40",children:"Date"}),(0,i.jsx)("th",{className:"w-12",children:"%"}),(0,i.jsx)("th",{children:"Amount"}),(0,i.jsx)("th",{className:"text-center",children:(0,i.jsxs)(o.Z,{variant:J.length?"outline-primary":"outline-secondary",size:"sm",onClick:function(){A&&(W(-1),w.methods.claimAll(A).send(v({value:0,from:A},"POLY"===p.symbol?{gasPrice:"100000000000"}:{})).then((function(){s(),m.Am.success("Claimed all",{position:m.Am.POSITION.BOTTOM_RIGHT})})).catch((function(){m.Am.error('Failed to claim or "Claim all" is not supported in this claimer',{position:m.Am.POSITION.BOTTOM_RIGHT})})).finally((function(){return W(void 0)})))},disabled:!J.length,children:["Claim all (",J.length,")"]})})]})}),(0,i.jsxs)("tbody",{children:[!M&&(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:5,children:(0,i.jsx)(d.ZP,{count:5})})}),P.map((function(e){return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)(T,{claim:e,paused:U})}),(0,i.jsxs)("td",{children:[e.percent,"%"]}),(0,i.jsxs)("td",{children:[(0,j.dv)(e.amount)," ",S]}),(0,i.jsx)("td",{className:"text-center",children:(0,i.jsx)(C,{claim:e,tokenSymbol:S,account:A,paused:U,isClaiming:L,claimTokens:c})})]},e.idx)}))]})]})]})}function T(e){var t=e.claim,n=e.paused,a=t.claimedAmount.gt(f.Aj);return!t.time||n&&!a?(0,i.jsx)(i.Fragment,{children:"TBC"}):(0,i.jsx)(i.Fragment,{children:c().unix(t.time).utc().format(f.U5.noYear)})}function C(e){var t=e.claim,n=e.tokenSymbol,a=e.account,r=e.paused,s=e.isClaiming,c=e.claimTokens;return t.claimedAmount.gt(f.Aj)?(0,i.jsxs)("div",{children:[(0,j.dv)(t.claimedAmount)," ",n," ",(0,i.jsx)(u.FaCheck,{className:"inline text-green-600 ml-1"})]}):a?r?(0,i.jsx)(o.Z,{variant:"outline-light",size:"sm",disabled:!0,children:"Paused"}):t.isClaimable?(0,i.jsxs)(o.Z,{variant:"outline-primary",size:"sm",onClick:function(){return c(t.idx)},disabled:void 0!==s,children:[(s===t.idx||-1===s)&&(0,i.jsx)(u.FaCircleNotch,{className:"inline fa-spin mr-2"}),"Claim"]}):(0,i.jsx)(o.Z,{variant:"outline-light",size:"sm",disabled:!0,children:"Not claimable"}):(0,i.jsx)(o.Z,{variant:"outline-light",size:"sm",disabled:!0,children:"Connect wallet first"})}}}]);
//# sourceMappingURL=680-31dcc9a969d8888e.js.map